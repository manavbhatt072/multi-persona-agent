flowchart TD
    User([User Input]) --> Router[ðŸš¦ Router Agent]
    
    Router -- "Selects Experts" --> Decision{Is Chitchat?}
    
    %% Path 1: Simple Chitchat
    Decision -- Yes --> Greeter[ðŸ’¬ Greeter Agent]
    Greeter --> Output([Final Response])
    
    %% Path 2: Brainstorming Session
    Decision -- No --> P3
    
    subgraph CouncilBox [Dynamic Council - Parallel Execution]
        direction TB
        P1[ðŸ“ˆ Analyst]
        P2[ðŸ›‘ Critic]
        P3[âœ¨ Optimist]
        P4[ðŸŽ¨ Creative Thinker]
        P5[ðŸ› ï¸ Domain Expert]
    end
    
    P1 & P2 & P3 & P4 & P5 --> Mediator[âš–ï¸ Mediator Agent]
    
    Mediator -- "Synthesizes Reports" --> Check{Consensus Reached?}
    
    %% Feedback Loop
    Check -- "No (Request Refinement)" --> Feedback[âš ï¸ Feedback Loop]
    Feedback --> P3
    
    %% Success Path
    Check -- "Yes (Ready)" --> Podcaster[ðŸŽ™ï¸ Podcaster Agent]
    Podcaster --> Output([Final Podcast Script])

    %% Styling
    classDef agent fill:#f9f,stroke:#333,stroke-width:2px;
    classDef control fill:#ffd,stroke:#333,stroke-width:2px;
    classDef storage fill:#dfd,stroke:#333,stroke-width:2px;
    
    class Router,Greeter,Mediator,Podcaster,P1,P2,P3,P4,P5 agent;
    class Decision,Check control;
